<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Simon Kiss">
<meta name="dcterms.date" content="2020-02-20">

<title>Academic Hiring in Ontario â€“ Simon Kiss</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Simon Kiss</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html"> 
<span class="menu-text">Posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Academic Hiring in Ontario</h1>
                      </div>
  </div>
    
  <div class="quarto-title-meta-author">
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-heading">Affiliation</div>
    
      <div class="quarto-title-meta-contents">
      <p class="author"><a href="https://samanthacsik.github.io/">Simon Kiss</a> <a href="https://orcid.org/0000-0003-1837-5428" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
    </div>
    <div class="quarto-title-meta-contents">
          <p class="affiliation">
              <a href="https://wlu.ca">
              Wilfrid Laurier University, Human Rights and Political Science
              </a>
            </p>
        </div>
    </div>

  <div class="quarto-title-meta">

        
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 20, 2020</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#background" id="toc-background" class="nav-link" data-scroll-target="#background">Background</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="introduction" class="level3">
<h3 class="anchored" data-anchor-id="introduction">Introduction</h3>
<p>Alex Usher has a series of recent blog posts <a href="http://higheredstrategy.com/administrative-bloat-2020-edition/">here</a>, <a href="http://higheredstrategy.com/administrative-bloat-2020-part-ii/">here</a>, <a href="http://higheredstrategy.com/one-more-thought-on-administrative-bloat/">here</a> and <a href="http://higheredstrategy.com/one-last-thought-really-on-administrative-bloat-2020/">here</a> looking at academic versus non-academic expendituers and hiring in Canadian universities.</p>
<p>The basic thrust of Alexâ€™s findings are that while the <em>numbers</em> of non-academic staff are increasing, their overall aggregate salaries are not. His conclusion is that academic salaries continue to rise partially because there is no churn in the academic job market as there is in non-academic jobs. Once youâ€™re a prof, youâ€™re a prof for a <em>long</em> time and your salary basically increases. In increases at faster rates when you are younger to be sure, but it basically increases the entire time.</p>
<p>I wanted to play with the data from the Ontario public sector salary disclosure list (â€˜â€™Sunshine Listâ€™â€™) to see if we could learn anything about it.</p>
</section>
<section id="background" class="level3">
<h3 class="anchored" data-anchor-id="background">Background</h3>
<p>If you donâ€™t know already the Sunshine List is a dataset published annually by the Government of Ontario. It contains the name, title and salary of each public sector employee (broadly construed) who earned more than $100,00 in any calendar year. It was legislated in 1996 at the height of the Common Sense Revolution. The most generous interpretation of the legislation is that it is a tool for citizens to hold public employees to account. A different interpretation (which I favour) is that it was an attempt to shame, embarass public sector employees and to inflame public opinion as a resource to control public sector salaries.</p>
<p>When the legislation was passed, however, there were no provisions for adjusting the salary level upwards with inflation. That was over 20 years ago and so, inexorably, the sunshine list has gotten larger and larger. You would be shocked at the number of front-line nurses and police officers on that list now.</p>
<p>So, as time passes, the sunshine list will become an increasingly useful data source to track, in a very fine-grained way, salary patterns in Ontarioâ€™s public sector. The median salary for full-time university faculty in 2017-2017 was $128,950, meaning that the Ontario sunshine list contains <em>more</em> than half of Ontario full-time professors. Almost inexorably, that will include everyone one day.</p>
<p>I wasnâ€™t able to locate data on the average salary for non-academic staff in Ontario and it is almost certainly lower, but, again, given inflation, it wonâ€™t be an insignificant portion of the university workforce. Just remember there are a lot of teachers, nurses and police constables on that list, so university professionals like (well, nurses, engineering technicians in the physical plants, human resource executives, PR people) might plausibly be in the ball park.</p>
<p>And, at the very least, this exercise might be fun.</p>
<p>So, the headline finding from Alexâ€™s numbers are that while universities are hiring <em>more</em> non-academic staff than academic staff, the overall share of the compensation budget for non-academic staff is growing at about the same rate as for academic staff. His two charts here show this:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="http://higheredstrategy.com/wp-content/uploads/2020/02/February-19-2020-Figure-1.png" class="img-fluid figure-img"></p>
<figcaption>Growth in Number of Non-Academic and Academic Staff</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="http://higheredstrategy.com/wp-content/uploads/2020/02/February-18-2020-Figure-1.png" class="img-fluid figure-img"></p>
<figcaption>Non-academic and Academic salaries</figcaption>
</figure>
</div>
<p>The first thing we can check is Alexâ€™s finding that academic staff hiring is growing more slowly than non-academic staff. In order to do that, we need to take the myriad job titles in the sunshine list and code them as either academic or non-academic. The code below shows what Iâ€™ve done.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p>Basically, the lines below take any job title that contains the first string pattern in the line and sets it to be either academic or non-academic. As a rule of thumb, if a job title contained the titles â€˜profâ€™, â€˜lecturerâ€™, â€˜deanâ€™, â€˜chairâ€™, â€˜course directorâ€™, anything that is really focussed on doing teaching and research, then it got classed as academic. There were some edge cases, that were presumably attached mostly to university teaching hospitals (e.g.&nbsp;clinical psychologist). I set those to be missing, to exclude them. And the rest, I set to be non-academic.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>salaries <span class="sc">%&gt;%</span> </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Category=</span><span class="fu">case_when</span>(</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">#These categorize these job titles into the academic category</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Professor'</span>) <span class="sc">~</span><span class="st">"Academic"</span>,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Prof.'</span>) <span class="sc">~</span><span class="st">"Academic"</span>,</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Canada Research Chair'</span>) <span class="sc">~</span><span class="st">"Academic"</span>,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Lecturer'</span>) <span class="sc">~</span><span class="st">"Academic"</span>,</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Faculty'</span>) <span class="sc">~</span><span class="st">"Academic"</span>,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">"Librar"</span>) <span class="sc">~</span><span class="st">"Academic"</span>,</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Course Director'</span>) <span class="sc">~</span><span class="st">"Academic"</span>,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Chair'</span>) <span class="sc">~</span><span class="st">"Academic"</span>,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Dean'</span>) <span class="sc">~</span><span class="st">"Academic"</span>,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Principal'</span>) <span class="sc">~</span><span class="st">"Academic"</span>,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>        <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Instructor'</span>) <span class="sc">~</span><span class="st">"Academic"</span>,</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Research Associate'</span>) <span class="sc">~</span><span class="st">"Academic"</span>,</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Department Head'</span>)<span class="sc">~</span> <span class="st">"Academic"</span>,</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Research Director'</span>)<span class="sc">~</span> <span class="st">"Academic"</span>,</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Research Manager'</span>)<span class="sc">~</span> <span class="st">"Academic"</span>,</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Queen</span><span class="sc">\'</span><span class="st">s National Scholar'</span>)<span class="sc">~</span> <span class="st">"Academic"</span>,</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Molecular Biologist'</span>)<span class="sc">~</span> <span class="st">"Academic"</span>,</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Senior Researcher'</span>)<span class="sc">~</span> <span class="st">"Academic"</span>,</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Contract Academic Staff'</span>)<span class="sc">~</span> <span class="st">"Academic"</span>,</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Manager, Analytical Biology'</span>)<span class="sc">~</span> <span class="st">"Academic"</span>,</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Director, Sudbury Neutrino'</span>)<span class="sc">~</span> <span class="st">"Academic"</span>,</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Director Wilfrid Laurier Press'</span>)<span class="sc">~</span> <span class="st">"Academic"</span>,</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Tutor'</span>)<span class="sc">~</span> <span class="st">"Academic"</span>,</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>    <span class="co">#These are grey area jobs that are likely associated with university teaching hospitals; they are categorized as missing.  </span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>       <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Psychologist'</span>)<span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>     <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Clinician'</span>)<span class="sc">~</span> <span class="cn">NA_character_</span>,    </span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Clinical Research Coordinator'</span>)<span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>        <span class="fu">str_detect</span>(<span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, <span class="st">'Physician'</span>) <span class="sc">~</span><span class="cn">NA_character_</span>,</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="co">#If a job title is anything other than the above, it is classed as non-academnic</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Non-Academic"</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Sector<span class="sc">==</span><span class="st">"Universities"</span>)<span class="ot">-&gt;</span>salaries2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The first thing to do is see how many non-academic and academics are showing up, over time, on the sunshine list.</p>
<p>Is Alexâ€™s pattern that there is greater hiring for non-academic than for academic staff showing up for people earning $100,000? The answer is that it kind of looks like it. this graph shows the percent change over the previous year in the number of people in the non-academic and academic categories earning $100,00 per year in Ontario.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/how-many-1.png" class="img-fluid figure-img" width="480"></p>
</figure>
</div>
</div>
</div>
<p>It looks like there was about rough parity in the late 1990s and early 2000s and then non-academic staff have grown more rapidly than academic staff. Now, this doesnâ€™t particularly tell us if this is actually more bodies, it tells us there are increasingly more non-academic people on the sunshin list than academic staff.</p>
<p>But, we can also check whether there are different compensation patterns for non-academic staff and academic staff. Hereâ€™s the average salary over time for the two categories.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/average-salaries-1.png" class="img-fluid figure-img" width="480"></p>
</figure>
</div>
</div>
</div>
<p>Now that is a very different pattern. Average non-academic salaries (of people on the sunshine list) were <em>significantly</em> higher than academic faculty in the mid-1990s, but there has been a complete switch since then.</p>
<p>I think this is a super interesting pattern and I wonder if there is kind of a thermostatic reaction going on where senior non-academic and academic staff in universities watch each other and struggle for pay increases. In fact, I wonder if one perverse effect of the sunshine list was to <em>increase</em> academic salaries because they suddenly had very clear access to data on their non-academic counterparts who had a series of good years in the mid- to late-1990s.</p>
<p>I think these data are basically compatible with Alexâ€™ conclusions which is that non-academic hiring has been growing at lower salaries than non-academic hiring. But the only way to square the first graph with the second is that any growth in Ontario in the last 20 years either in the # of non-academic staff or their salaries is constrained to people earning maybe just above the $100,00 salary mark. Otherwise, we would have seen an increase in the average salary of people on the sunshine list; but we havenâ€™t.</p>
<p>For academic staff, though, while the # of people showing up on the sunshine list has been slower (growing presumably because of a combination of inflationary pressures on salaries overall and on some hiring expansion), the average salary above $100,000 has shown absolutely no sign of slowing down. I think this is basically because the academic career path, as currently structured in Ontario, guarantees salary increases at all ranks on the job (early and late).</p>
<p>And I wonder what this will look like going forward. One of the major differences between the non-academic and academic staff sectors (at the high levels) are that the former are not predominantly unionized, while the latter are. The formerâ€™s salaries are primarily dictated by market forces; how will that work in a sunshine list environment?</p>
<p>As inflation drives more and more people onto the sunshine list, more and more non-academic unionized employees will be on that list, eliminating that difference. That will take some time, but, barring changes in the legislation, it <em>will</em> happen. Will that make the thermostatic see-saw worse?</p>
</section>
<section id="conclusion" class="level3">
<h3 class="anchored" data-anchor-id="conclusion">Conclusion</h3>
<p>Ontarioâ€™s public sector salary disclosure list offers a really interesting dataset on public sector salaries, and itâ€™s going to become even more important as inflation drives more and more people onto the list. Second, Alex Usherâ€™s finding that aggregate numbers of non-academic staff are growing at greater rates in the university sector than academic rates is compatible with these data. But we these data donâ€™t tell us if this is because there are increased #s of non-academic people or just more and more people earning over $100,000. However, taking into account the fact that the average of non-academic staff salaries is flatlined with Alexâ€™s finding, it suggests that universities are hiring more and more non-academic people around the $100,00 mark. Third, the average salaries of academic staff <em>earning over $100,000</em> are are growing at much faster rate than their non-academic colleagues.</p>
<p>Just as a check that my method of selecting job titles into the academic or non-academic category was plausible. Here are the top 30 uniquely occuring job titles in each category.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;">Job Title</th>
<th style="text-align: left;">Category</th>
<th style="text-align: right;">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Associate Professor</td>
<td style="text-align: left;">Academic</td>
<td style="text-align: right;">39944</td>
</tr>
<tr class="even">
<td style="text-align: left;">Professor</td>
<td style="text-align: left;">Academic</td>
<td style="text-align: right;">35672</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Assistant Professor</td>
<td style="text-align: left;">Academic</td>
<td style="text-align: right;">9572</td>
</tr>
<tr class="even">
<td style="text-align: left;">Faculty Member</td>
<td style="text-align: left;">Academic</td>
<td style="text-align: right;">7952</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Faculty</td>
<td style="text-align: left;">Academic</td>
<td style="text-align: right;">4327</td>
</tr>
<tr class="even">
<td style="text-align: left;">Full Professor</td>
<td style="text-align: left;">Academic</td>
<td style="text-align: right;">3965</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Professeur(e) agrÃ©gÃ©(e) / Associate Professor</td>
<td style="text-align: left;">Academic</td>
<td style="text-align: right;">2189</td>
</tr>
<tr class="even">
<td style="text-align: left;">Professeur(e) titulaire / Full Professor</td>
<td style="text-align: left;">Academic</td>
<td style="text-align: right;">1969</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Lecturer</td>
<td style="text-align: left;">Academic</td>
<td style="text-align: right;">1667</td>
</tr>
<tr class="even">
<td style="text-align: left;">Professor/Professeur</td>
<td style="text-align: left;">Academic</td>
<td style="text-align: right;">1286</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Professor of Education</td>
<td style="text-align: left;">Academic</td>
<td style="text-align: right;">1058</td>
</tr>
<tr class="even">
<td style="text-align: left;">Professeur/Professor</td>
<td style="text-align: left;">Academic</td>
<td style="text-align: right;">823</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Professeur(e) adjoint(e) / Assistant Professor</td>
<td style="text-align: left;">Academic</td>
<td style="text-align: right;">808</td>
</tr>
<tr class="even">
<td style="text-align: left;">Professeur - Professor</td>
<td style="text-align: left;">Academic</td>
<td style="text-align: right;">692</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Instructor</td>
<td style="text-align: left;">Academic</td>
<td style="text-align: right;">642</td>
</tr>
<tr class="even">
<td style="text-align: left;">Senior Lecturer</td>
<td style="text-align: left;">Academic</td>
<td style="text-align: right;">614</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Professor of Dentistry</td>
<td style="text-align: left;">Academic</td>
<td style="text-align: right;">556</td>
</tr>
<tr class="even">
<td style="text-align: left;">Professor of English</td>
<td style="text-align: left;">Academic</td>
<td style="text-align: right;">555</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Professor of Economics</td>
<td style="text-align: left;">Academic</td>
<td style="text-align: right;">554</td>
</tr>
<tr class="even">
<td style="text-align: left;">Librarian</td>
<td style="text-align: left;">Academic</td>
<td style="text-align: right;">543</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Director</td>
<td style="text-align: left;">Non-Academic</td>
<td style="text-align: right;">555</td>
</tr>
<tr class="even">
<td style="text-align: left;">Gestionnaire / Manager</td>
<td style="text-align: left;">Non-Academic</td>
<td style="text-align: right;">253</td>
</tr>
<tr class="odd">
<td style="text-align: left;">President</td>
<td style="text-align: left;">Non-Academic</td>
<td style="text-align: right;">253</td>
</tr>
<tr class="even">
<td style="text-align: left;">Directeur(trice) / Director</td>
<td style="text-align: left;">Non-Academic</td>
<td style="text-align: right;">221</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Executive Officer</td>
<td style="text-align: left;">Non-Academic</td>
<td style="text-align: right;">180</td>
</tr>
<tr class="even">
<td style="text-align: left;">Registrar</td>
<td style="text-align: left;">Non-Academic</td>
<td style="text-align: right;">139</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Directeur(rice) / Director</td>
<td style="text-align: left;">Non-Academic</td>
<td style="text-align: right;">129</td>
</tr>
<tr class="even">
<td style="text-align: left;">Executive Director</td>
<td style="text-align: left;">Non-Academic</td>
<td style="text-align: right;">111</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Information Technology Analyst</td>
<td style="text-align: left;">Non-Academic</td>
<td style="text-align: right;">108</td>
</tr>
<tr class="even">
<td style="text-align: left;">Chief Administrative Officer</td>
<td style="text-align: left;">Non-Academic</td>
<td style="text-align: right;">107</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Manager</td>
<td style="text-align: left;">Non-Academic</td>
<td style="text-align: right;">105</td>
</tr>
<tr class="even">
<td style="text-align: left;">Chief Information Officer</td>
<td style="text-align: left;">Non-Academic</td>
<td style="text-align: right;">103</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Associate Director</td>
<td style="text-align: left;">Non-Academic</td>
<td style="text-align: right;">99</td>
</tr>
<tr class="even">
<td style="text-align: left;">Controller</td>
<td style="text-align: left;">Non-Academic</td>
<td style="text-align: right;">86</td>
</tr>
<tr class="odd">
<td style="text-align: left;">University Registrar</td>
<td style="text-align: left;">Non-Academic</td>
<td style="text-align: right;">82</td>
</tr>
<tr class="even">
<td style="text-align: left;">Business Manager</td>
<td style="text-align: left;">Non-Academic</td>
<td style="text-align: right;">78</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Counsellor</td>
<td style="text-align: left;">Non-Academic</td>
<td style="text-align: right;">78</td>
</tr>
<tr class="even">
<td style="text-align: left;">Lead Distributed Systems Specialist</td>
<td style="text-align: left;">Non-Academic</td>
<td style="text-align: right;">78</td>
</tr>
<tr class="odd">
<td style="text-align: left;">University Secretary</td>
<td style="text-align: left;">Non-Academic</td>
<td style="text-align: right;">78</td>
</tr>
<tr class="even">
<td style="text-align: left;">Directeur(rice) adjoint(e) / Assistant Director</td>
<td style="text-align: left;">Non-Academic</td>
<td style="text-align: right;">76</td>
</tr>
</tbody>
</table>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>The full code is <a href="https://github.com/sjkiss/sjkiss.github.io/blob/master/post/2020-02-20-academic-and-non-academic-hiring-in-ontario-1996-2018/files/2020-02-20-academic-and-non-academic-hiring-in-ontario-1996-2018.R">here</a>. Eventually I think Iâ€™ll plunk the whole Ontario sunshine list online, like in one file instead of the 23 separate files as is currently the case.<a href="#fnref1" class="footnote-back" role="doc-backlink">â†©ï¸Ž</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>